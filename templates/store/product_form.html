{% extends 'base.html' %}
{% block title %}
    {% if form.instance.id %}Mahsulotni tahrirlash{% else %}Yangi mahsulot qo‘shish{% endif %}
{% endblock %}
{% block content %}
    <h1 class="mb-4">
        {% if form.instance.id %}Mahsulotni tahrirlash{% else %}Yangi mahsulot qo‘shish{% endif %}
    </h1>
    {% if form.errors %}
        <div class="alert alert-danger">
            {% for field in form %}
                {% for error in field.errors %}
                    <p>{{ field.label }}: {{ error }}</p>
                {% endfor %}
            {% endfor %}
        </div>
    {% endif %}
    <form method="post" class="needs-validation" novalidate>
        {% csrf_token %}
        <div class="form-group">
            <label for="{{ form.name.id_for_label }}">Nomi</label>
            {{ form.name }}
            <div class="invalid-feedback">Iltimos, mahsulot nomini kiriting.</div>
        </div>
        <div class="form-group">
            <label for="{{ form.category.id_for_label }}">Kategoriya</label>
            {{ form.category }}
            <div class="invalid-feedback">Iltimos, kategoriyani tanlang.</div>
        </div>
        <div class="form-group">
            <label for="{{ form.price.id_for_label }}">Narxi</label>
            {{ form.price }}
            <div class="invalid-feedback">Iltimos, to‘g‘ri narxni kiriting.</div>
        </div>
        <div class="form-group">
            <label for="{{ form.stock.id_for_label }}">Qoldiq</label>
            {{ form.stock }}
            <div class="invalid-feedback">Iltimos, qoldiq miqdorini kiriting.</div>
        </div>
        <div class="form-group">
            <label for="{{ form.description.id_for_label }}">Ta’rifi</label>
            {{ form.description }}
        </div>
        <button type="submit" class="btn btn-custom">Saqlash</button>
        <a href="{% url 'product_list' %}" class="btn btn-secondary">Bekor qilish</a>
    </form>
{% endblock %}